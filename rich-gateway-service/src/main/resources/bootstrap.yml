spring:
  application:
    name: rich-gateway-service
  main:
    allow-bean-definition-overriding: true
  profiles:
    active: dev
  cloud:
    gateway:
      default-filters:
        # 限流配置
        - name: RequestRateLimiter
          args:
            key-resolver: '#{@remoteAddrKeyResolver}'
            redis-rate-limiter.replenishRate: 1
            redis-rate-limiter.burstCapacity: 1
          # 降级配置
        - name: Hystrix
          args:
            name: default
            fallbackUri: 'forward:/fallback'
    config:
      discovery:
        enabled: true
        service-id: rich-config-service
      profile: ${spring.profiles.active}
      label: ${spring.profiles.active}
      fail-fast: true
    bus:
      trace:
        enabled: true
      enabled: true
---
spring:
  profiles: dev
eureka:
  instance:
    prefer-ip-address: true
    lease-renewal-interval-in-seconds: 5
    lease-expiration-duration-in-seconds: 20
  client:
    service-url:
      defaultZone: http://127.0.0.1:10151/eureka
---
spring:
  profiles: prd
eureka:
  instance:
    prefer-ip-address: true
  client:
    serviceUrl:
      defaultZone: http://127.0.0.1:10151/eureka